async function c(n,i,t){for await(const a of n.values()){const o=`${i}/${a.name}`;await t(a,o)}}async function d(n,i){const t=[];return await c(n,i,async(a,o)=>{try{if(a.kind==="file"){const e=a;e.relativePath=o,t.push({id:crypto.randomUUID(),name:a.name,kind:"file",handler:e})}else if(a.kind==="directory"){const e=a;e.relativePath=o;let s=await d(a,o);t.push({id:crypto.randomUUID(),name:a.name,kind:"directory",handler:e,children:s,expanded:!1})}}catch(e){throw e.name==="NotFoundError"&&(console.warn(`[SKIP] Item tidak ditemukan: ${o}`,e),n.relativePath=o,t.push({id:crypto.randomUUID(),name:`${a.name} (hilang)`,kind:"file",handler:n})),e}}),t}globalThis.onmessage=async n=>{switch(n.data.type){case"makeFileNode":const i=await d(n.data.payload.dirHandle,n.data.payload.currentPath);globalThis.postMessage({type:n.data.type,result:i});break}};
